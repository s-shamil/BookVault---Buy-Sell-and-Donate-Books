create or replace TYPE MY_WISH IS OBJECT( ISBN varchar2(20),BOOK_NAME varchar2(100),AUTHOR_NAME varchar2(60),PRICE_E number);

create or replace TYPE MY_WISH_TAB IS TABLE OF MY_WISH;

create or replace FUNCTION SHOW_WISHES(MY_ID IN VARCHAR2)
RETURN MY_WISH_TAB
IS
    TEMP_TAB MY_WISH_TAB := MY_WISH_TAB();
    NN INTEGER := 0;
BEGIN
    FOR RR IN (SELECT ISBN,BOOK_NAME,AUTHOR_NAME,PRICE_E FROM D_WISHLIST JOIN BOOK_CATALOG USING(ISBN) JOIN AUTHOR_BOOK USING (ISBN) JOIN AUTHOR USING(AUTHOR_ID) WHERE USER_ID=MY_ID)
    LOOP
        TEMP_TAB.EXTEND;
        NN := NN+1;
        TEMP_TAB(NN) := MY_WISH(RR.ISBN, RR.BOOK_NAME, RR.AUTHOR_NAME, RR.PRICE_E);
    END LOOP;
    RETURN TEMP_TAB;
END;
